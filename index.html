<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEURAL_DECAY :: Coding + Medicine + Chaos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- styles omitted for brevity; use your existing style block -->
</head>
<body>
    <header id="home">
        <div class="container">
            <div class="header-content">
                <div>
                    <a href="#home" class="logo glitch" onclick="showAllPosts()">NEURAL_DECAY</a>
                    <div class="tagline">> coding + medicine + digital_chaos</div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" onclick="showAllPosts()">home</a></li>
                        <li><a href="#" onclick="showPostsByTag('coding')">coding</a></li>
                        <li><a href="#" onclick="showPostsByTag('medicine')">medicine</a></li>
                        <li><a href="#" onclick="showPostsByTag('bioinformatics')">bio_info</a></li>
                        <li><a href="#contact">contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="container">
        <main>
            <div class="content-area">
                <!-- About sections omitted for brevity -->
                <div id="coding" class="blog-posts">
                    <h2><i class="fas fa-terminal"></i> Recent_Transmissions</h2>
                    <div id="posts-container"></div>
                </div>
            </div>
            <aside class="sidebar">
                <div class="widget">
                    <div class="widget-header">
                        <h2 class="widget-title"><i class="fas fa-book-open"></i> PAPER_OF_THE_DAY</h2>
                    </div>
                    <div class="widget-content" id="paper-of-the-day"></div>
                </div>
                <div class="widget">
                    <div class="widget-header">
                        <h2 class="widget-title"><i class="fas fa-history"></i> RECENT_POSTS</h2>
                    </div>
                    <div class="widget-content">
                        <div id="recent-posts-widget" class="recent-posts"></div>
                    </div>
                </div>
                <div class="widget">
                    <div class="widget-header">
                        <h2 class="widget-title"><i class="fas fa-tags"></i> TAGS</h2>
                    </div>
                    <div class="widget-content">
                        <div id="categories-widget" class="recent-posts"></div>
                    </div>
                </div>
            </aside>
        </main>
        <!-- Gallery and footer omitted for brevity -->
    </div>

    <footer id="contact">
        <!-- footer content omitted for brevity -->
    </footer>

    <script src="posts.js"></script>
    <script>
        // Ensure posts.js is loaded and allPosts is available
        document.addEventListener('DOMContentLoaded', function() {
            // Render all posts
            renderPostsByTag();
            // Render recent posts in sidebar
            renderRecentPostsWidget(allPosts);
            // Render tags/categories in sidebar
            renderTagsWidget(allPosts);

            // Hash navigation
            if (window.location.hash) {
                const hash = window.location.hash.substr(1);
                if (hash.startsWith('tag-')) {
                    const tag = hash.replace('tag-', '');
                    showPostsByTag(tag);
                } else if (hash.startsWith('post-')) {
                    const postId = hash.replace('post-', '');
                    showFullPost(postId);
                }
            }
        });

        // Global navigation functions
        window.showPostsByTag = function(tag) {
            renderPostsByTag(tag);
            window.location.hash = `tag-${tag}`;
        };

        window.showAllPosts = function() {
            renderPostsByTag();
            window.location.hash = '';
        };

        window.showFullPost = function(postId) {
            const post = allPosts.find(p => p.id === postId);
            if (post) {
                const container = document.getElementById('posts-container');
                container.innerHTML = `
                    <div class="full-post">
                        <button onclick="showAllPosts()" class="back-button">
                            <i class="fas fa-arrow-left"></i> Back to Posts
                        </button>
                        <article class="post full-post-content">
                            <div class="post-meta">
                                <span class="post-category ${post.category}">${post.category}</span>
                                <span class="post-date">${post.date}</span>
                            </div>
                            <h1>${post.title}</h1>
                            <div class="post-content" style="color: var(--text-primary); line-height: 1.7;">
                                ${post.content.split('\n\n').map(paragraph => 
                                    `<p>${paragraph.trim().replace(/\n/g, '<br>')}</p>`
                                ).join('')}
                            </div>
                            <div class="post-footer" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
                                    ${post.tags ? post.tags.map(tag => 
                                        `<a href="javascript:void(0)" onclick="showPostsByTag('${tag}')" style="background: var(--accent-cyan); color: #000; padding: 3px 8px; border-radius: 3px; font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; text-decoration: none;">#${tag}</a>`
                                    ).join('') : ''}
                                </div>
                                ${post.id === 'plasmyrage' ? `
                                <a href="https://gravityeffect1.github.io/plasmyrage/" target="_blank" style="background: var(--accent-green); color: #000; padding: 10px 20px; border-radius: 3px; text-decoration: none; font-family: 'Share Tech Mono', monospace; display: inline-block; margin-right: 10px;">
                                    <i class="fas fa-external-link-alt"></i> View Live Demo
                                </a>` : ''}
                            </div>
                        </article>
                    </div>
                `;
                window.location.hash = `post-${post.id}`;
            }
        };

        function renderPostsByTag(tag = null) {
            const container = document.getElementById('posts-container');
            container.innerHTML = '';
            let postsToShow = allPosts;
            if (tag) {
                postsToShow = allPosts.filter(post => post.tags.includes(tag));
                // Tag header
                const tagHeader = document.createElement('div');
                tagHeader.innerHTML = `
                    <div style="background: var(--bg-accent); border: 1px solid var(--accent-cyan); border-radius: 5px; padding: 15px; margin-bottom: 20px;">
                        <h3 style="font-family: 'Orbitron', monospace; color: var(--accent-cyan); margin: 0; text-transform: uppercase; letter-spacing: 1px;">
                            <i class="fas fa-tag"></i> TAG: #${tag}
                        </h3>
                        <p style="font-family: 'Share Tech Mono', monospace; color: var(--text-secondary); font-size: 0.8rem; margin: 5px 0 0 0;">
                            // Showing ${postsToShow.length} post${postsToShow.length === 1 ? '' : 's'} with this tag
                        </p>
                        <button onclick="showAllPosts()" style="background: transparent; border: 1px solid var(--accent-cyan); color: var(--accent-cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; padding: 4px 8px; border-radius: 3px; cursor: pointer; margin-top: 10px; transition: all 0.3s ease;" onmouseover="this.style.background='var(--accent-cyan)'; this.style.color='#000'" onmouseout="this.style.background='transparent'; this.style.color='var(--accent-cyan)'">
                            <i class="fas fa-arrow-left"></i> BACK TO ALL POSTS
                        </button>
                    </div>
                `;
                container.appendChild(tagHeader);
            }
            if (postsToShow.length === 0) {
                container.innerHTML += `
                    <div class="no-posts">
                        <div class="terminal-empty">
                            <div class="terminal-header">user@neural_decay:~$ find . -type f -name "*${tag}*"</div>
                            <div class="terminal-body">
                                <span class="prompt">root@system:~#</span> <span class="command">ls -la</span><br>
                                <span class="output">// No posts found for this tag</span><br>
                                <span class="output">// Status: [AWAITING_CONTENT]</span>
                            </div>
                        </div>
                    </div>`;
                return;
            }
            postsToShow.forEach(post => {
                const postElement = document.createElement('article');
                postElement.className = 'post';
                postElement.innerHTML = `
                    <div class="post-meta">
                        <span class="post-category ${post.category}">${post.category}</span>
                        <span class="post-date">${post.date}</span>
                    </div>
                    <h3><a href="javascript:void(0)" onclick="showFullPost('${post.id}')">${post.title}</a></h3>
                    <p class="post-excerpt">${post.excerpt}</p>
                    <a href="javascript:void(0)" class="read-more" onclick="showFullPost('${post.id}')">Read Transmission &gt;</a>
                `;
                container.appendChild(postElement);
            });
        }

        function renderRecentPostsWidget(posts) {
            const container = document.getElementById('recent-posts-widget');
            const recentPosts = posts.slice(0, 5);
            if (recentPosts.length > 0) {
                container.innerHTML = recentPosts.map(p => 
                    `<a href="javascript:void(0)" onclick="showFullPost('${p.id}')">${p.title}</a>`
                ).join('');
            } else {
                container.innerHTML = '<div style="padding: 20px; text-align: center;"><div style="font-family: \'Share Tech Mono\', monospace; color: #666; font-style: italic; font-size: 0.85rem;">// No posts found</div><div style="font-family: \'Share Tech Mono\', monospace; color: #555; font-style: italic; font-size: 0.75rem; margin-top: 5px;">Directory empty</div></div>';
            }
        }

        function renderTagsWidget(posts) {
            const container = document.getElementById('categories-widget');
            const allTags = posts.flatMap(p => p.tags || []);
            const uniqueTags = [...new Set(allTags)];
            if (uniqueTags.length > 0) {
                container.innerHTML = uniqueTags.map(tag => 
                    `<a href="javascript:void(0)" onclick="showPostsByTag('${tag}')">#${tag}</a>`
                ).join('');
            } else {
                container.innerHTML = '<div style="padding: 20px; text-align: center;"><div style="font-family: \'Share Tech Mono\', monospace; color: #666; font-style: italic; font-size: 0.85rem;">// No tags available</div><div style="font-family: \'Share Tech Mono\', monospace; color: #555; font-style: italic; font-size: 0.75rem; margin-top: 5px;">Tags will populate with content</div></div>';
            }
        }
    </script>
    <script src="paper.js"></script>
</body>
</html>
