<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NEURAL_DECAY :: Coding + Medicine + Chaos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    body { background:#111; color:#eee; font-family:sans-serif; }
    .container { max-width:1000px; margin:0 auto; padding:20px; }
    header { border-bottom:2px solid #00eeff; margin-bottom:20px; }
    .logo { font-size:2em; color:#00eeff; text-decoration:none; font-weight:bold; }
    nav ul { list-style:none; padding:0; display:flex; gap:20px; }
    nav a { color:#eee; text-decoration:none; }
    main { display:flex; gap:30px; }
    .content-area { flex:2; }
    .sidebar { flex:1; }
    .widget { background:#222; border:1px solid #333; border-radius:5px; margin-bottom:20px; }
    .widget-header { background:#333; padding:10px;}
    .widget-title { color:#00eeff; font-size:1em; }
    .recent-posts a { display:block; color:#b0b0b0; text-decoration:none; padding:8px 0; border-bottom:1px solid #333;}
    .recent-posts a:last-child { border-bottom:none; }
    .recent-posts a:hover { color:#00eeff; }
    .blog-posts h2 { color:#19fbec; margin-bottom:15px;}
    .post { background:#222; margin-bottom:20px; border-radius:5px; padding:15px; }
    .post-meta { font-size:0.9em; color:#b0b0b0; margin-bottom:5px;}
    .post-category { background: #00eeff; color: #222; padding: 2px 8px; border-radius: 3px; font-size:0.8em;}
    .post-date { margin-left:10px; }
    .post h3 { margin:10px 0; }
    .post-excerpt { color:#bbb;}
    .read-more { color:#19fbec; text-decoration:none; font-size:0.95em; }
    .read-more:hover { color:#00eeff;}
    .full-post-content { background:#222; border-radius:5px; padding:20px;}
    .back-button { margin-bottom:20px;}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="#" class="logo" onclick="showAllPosts()">NEURAL_DECAY</a>
      <nav>
        <ul>
          <li><a href="#" onclick="showAllPosts()">home</a></li>
          <li><a href="#" onclick="showPostsByTag('coding')">coding</a></li>
          <li><a href="#" onclick="showPostsByTag('medicine')">medicine</a></li>
          <li><a href="#" onclick="showPostsByTag('bioinformatics')">bio_info</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <div class="container">
    <main>
      <div class="content-area">
        <div class="blog-posts">
          <h2>Recent_Transmissions</h2>
          <div id="posts-container"></div>
        </div>
      </div>
      <aside class="sidebar">
        <div class="widget">
          <div class="widget-header">
            <span class="widget-title"><i class="fas fa-book-open"></i> PAPER_OF_THE_DAY</span>
          </div>
          <div class="widget-content" id="paper-of-the-day"></div>
        </div>
        <div class="widget">
          <div class="widget-header">
            <span class="widget-title"><i class="fas fa-history"></i> RECENT_POSTS</span>
          </div>
          <div class="widget-content">
            <div id="recent-posts-widget" class="recent-posts"></div>
          </div>
        </div>
        <div class="widget">
          <div class="widget-header">
            <span class="widget-title"><i class="fas fa-tags"></i> TAGS</span>
          </div>
          <div class="widget-content">
            <div id="categories-widget" class="recent-posts"></div>
          </div>
        </div>
      </aside>
    </main>
  </div>
  <script src="posts.js"></script>
  <script>
    window.showPostsByTag = function(tag) {
      renderPostsByTag(tag);
      window.location.hash = "tag-" + tag;
    };
    window.showAllPosts = function() {
      renderPostsByTag();
      window.location.hash = "";
    };
    window.showFullPost = function(postId) {
      const post = allPosts.find(p => p.id === postId);
      if (post) {
        const container = document.getElementById('posts-container');
        container.innerHTML = `
          <div class="full-post">
            <button onclick="showAllPosts()" class="back-button">
              <i class="fas fa-arrow-left"></i> Back to Posts
            </button>
            <article class="post full-post-content">
              <div class="post-meta">
                <span class="post-category">${post.category}</span>
                <span class="post-date">${post.date}</span>
              </div>
              <h1>${post.title}</h1>
              <div class="post-content">${post.content.replace(/\n/g, '<br>')}</div>
              <div style="margin-top:15px;">
                ${post.tags ? post.tags.map(tag=>`<a href="javascript:void(0)" onclick="showPostsByTag('${tag}')">#${tag}</a>`).join(' ') : ''}
              </div>
              ${post.id === 'plasmyrage' ? `<a href="https://gravityeffect1.github.io/plasmyrage/" target="_blank" style="color:#00eeff">View Live Demo</a>` : ''}
            </article>
          </div>
        `;
        window.location.hash = "post-" + post.id;
      }
    };
    function renderPostsByTag(tag=null) {
      const container = document.getElementById('posts-container');
      container.innerHTML = '';
      let postsToShow = allPosts;
      if (tag) {
        postsToShow = allPosts.filter(post => post.tags.includes(tag));
        container.innerHTML += `<div style="margin-bottom:15px;"><b>Tag:</b> #${tag} (${postsToShow.length})</div>`;
      }
      if (postsToShow.length === 0) {
        container.innerHTML += `<div style="color:#888;font-style:italic;">No posts found.</div>`;
        return;
      }
      postsToShow.forEach(post => {
        const postElement = document.createElement('article');
        postElement.className = 'post';
        postElement.innerHTML = `
          <div class="post-meta"><span class="post-category">${post.category}</span> <span class="post-date">${post.date}</span></div>
          <h3><a href="javascript:void(0)" onclick="showFullPost('${post.id}')">${post.title}</a></h3>
          <p class="post-excerpt">${post.excerpt}</p>
          <a href="javascript:void(0)" class="read-more" onclick="showFullPost('${post.id}')">Read Transmission &gt;</a>
        `;
        container.appendChild(postElement);
      });
    }
    function renderRecentPostsWidget(posts) {
      const container = document.getElementById('recent-posts-widget');
      const recentPosts = posts.slice(0, 5);
      if (recentPosts.length > 0) {
        container.innerHTML = recentPosts.map(p =>
          `<a href="javascript:void(0)" onclick="showFullPost('${p.id}')">${p.title}</a>`
        ).join('');
      } else {
        container.innerHTML = '<div style="padding: 20px; text-align: center; color:#888;">// No posts found</div>';
      }
    }
    function renderTagsWidget(posts) {
      const container = document.getElementById('categories-widget');
      const allTags = posts.flatMap(p => p.tags || []);
      const uniqueTags = [...new Set(allTags)];
      if (uniqueTags.length > 0) {
        container.innerHTML = uniqueTags.map(tag =>
          `<a href="javascript:void(0)" onclick="showPostsByTag('${tag}')">#${tag}</a>`
        ).join(' ');
      } else {
        container.innerHTML = '<div style="padding: 20px; color:#888;">// No tags available</div>';
      }
    }
    document.addEventListener('DOMContentLoaded', function () {
      renderPostsByTag();
      renderRecentPostsWidget(allPosts);
      renderTagsWidget(allPosts);
      // Handle hash navigation on page load
      if (window.location.hash) {
        const hash = window.location.hash.substr(1);
        if (hash.startsWith('tag-')) {
          const tag = hash.replace('tag-', '');
          showPostsByTag(tag);
        } else if (hash.startsWith('post-')) {
          const postId = hash.replace('post-', '');
          showFullPost(postId);
        }
      }
    });
  </script>
  <script src="paper.js"></script>
</body>
</html>
